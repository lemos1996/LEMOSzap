import{j as a,r as c}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f.js";import{u as S,aj as w,m as v,n as z}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f23.js";import{u as E,a as O,d as k,g as I}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f20.js";import{_ as d,I as h,aL as B,as as P,D as T}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f11.js";import{U as R}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f73.js";import{U as M,a as F}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f122.js";import{d as N}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f155.js";import{W as u,V as U}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f19.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f8.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f7.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f4.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f3.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f2.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f10.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f6.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f9.js";const G=c.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f171.js")),[]));function V({tabId:e}){return a.jsx(c.Suspense,{fallback:a.jsx(a.Fragment,{}),children:a.jsx(G,{tabId:e})})}const D=c.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f172.js")),[]));function q({id:e}){return a.jsx(c.Suspense,{fallback:a.jsx(a.Fragment,{}),children:a.jsx(D,{id:e})})}const X=c.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f173.js")),[]));function W({id:e}){return a.jsx(c.Suspense,{fallback:a.jsx(a.Fragment,{}),children:a.jsx(X,{id:e})})}const $=c.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f174.js")),[]));function J({tabId:e,aba_System:n}){return a.jsx(c.Suspense,{fallback:a.jsx(a.Fragment,{}),children:a.jsx($,{tabId:e,aba_System:n})})}const H=c.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f175.js")),[]));function K({id:e}){return a.jsx(c.Suspense,{fallback:a.jsx(a.Fragment,{}),children:a.jsx(H,{id:e})})}async function Q(e){const n=E.getState().language,{session:p,user:A}=O.getState(),{userTabs:b}=S.getState(),{config:f}=k.getState();let s,i;if(e.type==="tab")switch(e.id){case 1:s=await u.Chat("List"),i=n.tab_all;break;case 2:s=await u.Chat("List","onlyGroups"),i=n.tab_groups;break;case 3:s=await u.Chat("List","nao-lido"),i=n.tab_unread;break;case 4:s=await u.Chat("List","1:1"),i=n.tab_1_1;break;case 5:s=await u.Chat("List",{type:"tab_atendentes",user:A}),i=n.tab_atendentes;break;default:const t=b.find(r=>r.id===e.id);s=t.chats,i=t.tag;break}else e.type==="crm"||(s=await u.Contact("List",{type:"withLabels",id:e.id}),i="Etiquetados");const C=await u.Utils("listGroupParticipants"),_=[];for(let t=0;t<s.length;t++){const r=s[t],x=await u.Utils("getContato",r.id);r.name=x.name;const g=C.find(m=>m.id===r.id);if(g)for(const m of g.participants)try{const L=await u.Utils("getContato",m.id);_.push({id:m.id,name:L.name})}catch{console.error("Contato de grupo nÃ£o capturado: ",m)}}s=s.concat(_),p.is_premium||(s=s.slice(0,5),h({type:"Info",message:n.modoGratuitoPermite5Contatos,position:"top-right"}));const y=new Set,l=s.filter(t=>y.has(t.id)?!1:(y.add(t.id),!0));if(l.length===0){h({type:"Error",message:n.semContatosParaExportar,position:"top-right"});return}const j={contacts:l.map(t=>({id:t.id,name:t.name})),labelName:f.primeiroNome,tag:i};try{const t=await fetch(`${U.backend_utils}api/XLSX/exporttab`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)});if(!t.ok)throw new Error("Erro ao enviar dados para o servidor");const r=await t.json();N(r.XLSXbase64,`${f.primeiroNome}_aba_${i}.xlsx`),h({type:"Success",message:n.exportSuccess,position:"top-right"})}catch(t){console.error("Erro ao exportar contatos:",t),h({type:"Error",message:n.erroEnvio,position:"top-right"})}}function fa({id:e,aba_System:n,type:p,name:A,color:b}){const{variaveisWA:f}=w(),{userTabs:s}=S(),i=R(),C=M(),_=F(),{open:y}=v(),{close:l}=z(),{isBusiness:j}=I(),{language:t}=E(),r=o=>{l(),y(o)},x=()=>{l(),Q({id:e,type:p})},g=()=>{l(),i()},m=[{id:1,nome:"menu_moreAba_addContact",type:"aba",aba_System:!1,isBusiness:!1,funcao:()=>r(a.jsx(V,{tabId:e}))},{id:2,nome:"menu_moreAba_importContactForEtiquet",type:"aba",aba_System:!1,isBusiness:!0,funcao:()=>r(a.jsx(K,{id:e}))},{id:3,nome:"menu_moreAba_copyContactForOtherAba",type:"aba",aba_System:!0,isBusiness:!1,funcao:()=>r(a.jsx(J,{tabId:e,aba_System:n}))},{id:4,nome:"menu_moreAba_exportAba",type:"aba",aba_System:!0,isBusiness:!1,funcao:()=>x()},{id:5,nome:"menu_moreAba_editar",type:"aba",aba_System:!1,isBusiness:!1,funcao:()=>{_(s.find(o=>o.id===e)),l()}},{id:6,nome:"menu_moreAba_remover",type:"aba",aba_System:!1,isBusiness:!1,funcao:()=>{C(s.find(o=>o.id===e)),l()}},{id:7,nome:"menu_moreAba_createTab",type:"aba",aba_System:!1,isBusiness:!1,funcao:()=>g()}],L=[{id:1,nome:"menu_moreAba_addContactLB",type:"Labels",funcao:()=>r(a.jsx(q,{id:e}))},{id:2,nome:"menu_moreAba_copyContactForOtherLB",type:"Labels",funcao:()=>r(a.jsx(W,{id:e}))},{id:3,nome:"menu_moreAba_exportLB",type:"Labels",funcao:()=>x()}];return a.jsxs("div",{children:[a.jsxs("div",{className:"flex gap-1 mx-3 pb-1 items-center",children:[a.jsx("span",{children:p==="Labels"?a.jsx(B,{size:24,style:{color:b}}):a.jsx(P,{size:24,style:{color:b}})}),a.jsx(T,{children:A})]}),a.jsx("div",{className:f.listagem.content1+"gap-1 flex flex-col",children:p==="tab"?m.map(o=>j===!1&&o.isBusiness===!0||n&&o.aba_System===!1?null:a.jsx("li",{className:"hoverShadown pulse cursor-pointer px-1 py-2",onClick:o.funcao,children:t[o.nome]},o.id)):L.map(o=>a.jsx("li",{className:"hoverShadown pulse cursor-pointer px-1 py-2",onClick:o.funcao,children:t[o.nome]},o.id))})]})}export{fa as default};
