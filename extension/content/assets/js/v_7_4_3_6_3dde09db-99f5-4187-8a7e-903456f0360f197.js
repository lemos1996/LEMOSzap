import{r as n,j as e}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f.js";import{u as A}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f34.js";import{u as W,c as V}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f89.js";import{u as k}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f20.js";import{H as se,bp as re,bx as ne,by as oe,bw as N,au as ie,b as ae,I as le,ao as Y,Q as K}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f11.js";import{R as ce,u as de}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f6.js";import{i as P}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f10.js";import{k as ue}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f191.js";import{B as S,x as O,G as pe,D as me,m as ge,a as xe,p as fe,t as q,b as he}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f217.js";import{c as Q,d as ye,e as U,a as ve,b as je,s as be,g as Ce,r as we,m as Ee}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f192.js";import{a as Ie}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f108.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f8.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f23.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f7.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f19.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f4.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f3.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f2.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f9.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f119.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f5.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f120.js";function Se(){const{language:t}=k(),{setActiveRenderCategoria:r}=W(),{pesquisar:o,setPesquisar:i}=V();return n.useEffect(()=>()=>{i("")},[]),e.jsxs("div",{className:"grid gap-2 p-2",children:[e.jsxs("div",{className:"flex gap-1 items-center ml-9",children:[e.jsx(se,{weight:"600",children:t.category}),e.jsx("span",{className:"group cursor-pointer lg:tooltip lg:tooltip-bottom before:!w-48","data-tip":t.categoryPopUp,children:e.jsx(re,{className:"h-4 w-4 group-hover:pulse"})})]}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(ne,{value:o,setValue:x=>i(x),placeholder:t.searchCategory}),e.jsx("span",{className:"cursor-pointer pulse lg:tooltip lg:tooltip-left","data-tip":t.createCategory,onClick:()=>r("createOrEdit"),children:e.jsx(oe,{className:"!w-[30px] !h-[30px] text-[var(--primaria)]"})})]})]})}var Ne=1e3,D=null,j="1px",De={width:j,height:j,padding:"0",position:"absolute",border:"0",clip:"rect(".concat(j,", ").concat(j,", ").concat(j,", ").concat(j,")"),overflow:"hidden",whiteSpace:"nowrap",marginTop:"-".concat(j),pointerEvents:"none"};function ze(){var t=document.createElement("div");return t.setAttribute("role","status"),Object.assign(t.style,De),document.body.append(t),t}function G(){return D===null&&(D=ze()),D}var z=null;function J(){z!==null&&clearTimeout(z),z=null}function Re(t){G(),J(),z=setTimeout(function(){z=null;var r=G();r.textContent=t},Ne)}function Oe(){var t;J(),(t=D)===null||t===void 0||t.remove(),D=null}const X=Symbol("item"),R={item:{outer:40,inner:34}};function F(t){return t[X]===!0}const Z=n.createContext(null);function Te(){const t=n.useContext(Z);return P(t!==null),t}const M={type:"idle"},H={type:"dragging"},B=O({flexGrow:1,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}),Le=O({boxSizing:"border-box",padding:"space.050",display:"flex",flexDirection:"column"}),Me=O({width:"100%",flexShrink:"0",height:`${R.item.inner}px`,boxSizing:"border-box",display:"flex",flexDirection:"row",alignContent:"center",padding:"space.050",position:"relative",borderWidth:"border.width",borderStyle:"solid",borderRadius:"8px",cursor:"grab"}),Fe=O({opacity:.4});function Pe({item:t,index:r,instanceId:o}){return{[X]:!0,item:t,index:r,instanceId:o}}const ke=n.memo(function({item:r,index:o,virtualItem:i,position:g}){const{removeCategory:x}=A(),{setEditModel:C}=V(),{language:w}=k(),{registerItem:E,instanceId:p}=Te(),[a,c]=n.useState(M),v=n.useRef(null),h=n.useRef(null);n.useEffect(()=>{const m=v.current;P(m),P(h.current);function I({source:d}){return F(d.data)&&d.data.instanceId===p&&d.data.item.id!==r.id}const T=Pe({item:r,index:o,instanceId:p});return Q(E({itemId:r.id,element:m}),je({element:m,dragHandle:h.current,getInitialData:()=>T,onGenerateDragPreview({nativeSetDragImage:d}){be({nativeSetDragImage:d,getOffset:fe({x:q("space.200","16px"),y:q("space.100","8px")}),render({container:s}){return c({type:"preview",container:s}),()=>c(H)}})},onDragStart(){c(H)},onDrop(){c(M)}}),ye({element:m,canDrop:I,getIsSticky:()=>!0,getData({input:d}){return ve(T,{element:m,input:d,allowedEdges:["top","bottom"]})},onDrag({self:d}){const s=U(d.data);c(l=>l.type==="is-over"&&l.closestEdge===s?l:{type:"is-over",closestEdge:s})},onDragLeave(){c(M)},onDrop(){c(M)}}))},[p,r,o,E]);const b=()=>{ae({submit:()=>x(r.id),icon:e.jsx(N,{size:28,style:{color:r.hexColor}}),confirmText:w.confirm,content:e.jsxs(e.Fragment,{children:[w.confirmDeleteCat," ",e.jsx("strong",{style:{color:r.hexColor},children:r.name})]})})};return e.jsxs(n.Fragment,{children:[e.jsx(S,{xcss:Le,style:{position:"absolute",top:0,left:0,width:"100%",height:`${i.size}px`,boxSizing:"border-box",transform:`translateY(${i.start}px)`,zIndex:a.type==="is-over"&&a.closestEdge?1:void 0},children:e.jsxs(S,{style:{position:"relative",height:R.item.inner},"style-inject":"grid-atlassian",children:[e.jsx(pe,{ref:v,alignItems:"center",columnGap:"space.100",templateColumns:"auto 1fr auto",xcss:[Me,a.type==="dragging"&&Fe],children:e.jsx(me,{trigger:({triggerRef:m,...I})=>e.jsxs("div",{className:"flex justify-between w-full",ref:ge([h,m]),...I,style:{pointerEvents:a.type!=="idle"?"none":void 0},children:[e.jsx("span",{className:"w-5 mr-1",children:e.jsx(N,{size:20,style:{color:r.hexColor}})}),e.jsx(S,{xcss:B,children:r.name}),e.jsxs("span",{className:"flex w-[50px] justify-between",children:[e.jsx("span",{className:"pulse cursor-pointer",onClick:()=>C(r),children:e.jsx(ie,{size:20,className:"text-[var(--panel-header-icon)]"})}),e.jsx("span",{className:"pulse cursor-pointer",onClick:b,children:e.jsx(Ie,{size:20,className:"text-[var(--panel-header-icon)]"})})]})]})})}),a.type==="is-over"&&a.closestEdge&&e.jsx("div",{className:"tema-indicador",children:e.jsx(xe,{edge:a.closestEdge,gap:`${R.item.outer-R.item.inner}px`})})]})}),a.type==="preview"&&ce.createPortal(e.jsxs("div",{className:"flex justify-between w-full ml-2",children:[e.jsx("span",{className:"w-5 mr-1",children:e.jsx(N,{size:20,style:{color:r.hexColor}})}),e.jsx(S,{xcss:B,children:r.name})]}),a.container)]})}),$e=O({maxWidth:"100%",height:"100%",overflowY:"scroll"});function Ae({index:t,items:r}){return r.length===1?"only":t===0?"first":t===r.length-1?"last":"middle"}function Ve(){const t=new Map;function r({itemId:i,element:g}){return t.set(i,g),function(){t.get(i)===g&&t.delete(i)}}function o(i){return t.get(i)??null}return{register:r,getElement:o}}function _e(){const{categories:t,sortCategories:r}=A(),{pesquisar:o,setPesquisar:i}=V(),{language:g}=k(),[{items:x,lastCardMoved:C},w]=n.useState(()=>({items:t,lastCardMoved:null}));n.useEffect(()=>{w(s=>({...s,items:t}))},[t]);const E=s=>s.replace(/[\p{Emoji}\p{Extended_Pictographic}]/gu,""),p=n.useMemo(()=>x.filter(s=>{const l=E(s.name.toLowerCase()),u=E(o.toLowerCase());return l.includes(u)}),[x,o,t]),[a]=n.useState(Ve),c=n.useRef(null),v=de({count:p.length,getScrollElement:()=>c.current,estimateSize:()=>R.item.outer,overscan:2}),[h]=n.useState(()=>Symbol("instance-id")),b=n.useCallback(({startIndex:s,indexOfTarget:l,closestEdgeOfTarget:u})=>{if(o.length!==0){le({type:"Error",message:g.catFilter_notReorderable,position:"top-right"});return}const y=Ce({startIndex:s,closestEdgeOfTarget:u,indexOfTarget:l,axis:"vertical"});y!==s&&(w(f=>{const L=f.items[s];return{items:we({list:f.items,startIndex:s,finishIndex:y}),lastCardMoved:{item:L,previousIndex:s,currentIndex:y,numberOfItems:f.items.length}}}),r({oldIndex:s,newIndex:y}))},[o]);n.useEffect(()=>{if(C===null)return;const{item:s,previousIndex:l,currentIndex:u,numberOfItems:y}=C;Re(`You've moved ${s.name} from position ${l+1} to position ${u+1} of ${y}.`),setTimeout(()=>{v.scrollToIndex(u),setTimeout(()=>{const f=a.getElement(s.id);f&&he(f)},100)})},[C,v,a,t]),n.useEffect(()=>{const s=c.current;P(s);function l({source:u}){return F(u.data)&&u.data.instanceId===h}return Q(Ee({canMonitor:l,onDrop({location:u,source:y}){const f=u.current.dropTargets[0];if(!f)return;const L=y.data,$=f.data;if(!F(L)||!F($))return;const _=x.findIndex(te=>te.id===$.item.id);if(_<0)return;const ee=U($);b({startIndex:L.index,indexOfTarget:_,closestEdgeOfTarget:ee})}}),ue({canScroll:l,element:s}))},[h,x,b,t]),n.useEffect(()=>function(){Oe()},[]);const m=n.useCallback(()=>p.length,[p.length]),I=n.useMemo(()=>({registerItem:a.register,reorderItem:b,instanceId:h,getListLength:m}),[a.register,b,h,m]),T=e.jsx("div",{style:{height:`${v.getTotalSize()}px`,width:"100%",position:"relative"},children:v.getVirtualItems().map(s=>e.jsx(ke,{item:p[s.index],virtualItem:s,index:s.index,position:Ae({index:s.index,items:p})},s.key))}),d=e.jsxs("div",{className:"grid gap-2 mb-2",children:[e.jsx(Y,{icon:e.jsx(N,{size:24,className:"text-[var(--primaria)]"}),title:g.noneCategoryFound,description:g.noneCategoryFound_desFilter}),e.jsx(K,{name:g.clear_filter,funcao:()=>i("")})]});return e.jsx("div",{className:"pl-2",style:{height:"calc(100vh - 210px)"},children:e.jsx(Z.Provider,{value:I,children:e.jsx(S,{ref:c,xcss:$e,children:p.length!==0?T:d})})})}function dt(){const{categories:t}=A(),{setActiveRenderCategoria:r}=W(),{language:o}=k(),i=e.jsxs("div",{className:"grid gap-2 mb-2 pb-4",children:[e.jsx(Y,{icon:e.jsx(N,{size:24,className:"text-[var(--primaria)]"}),title:o.noneCategoryFound,description:o.noneCategoryFound_des}),e.jsx(K,{name:o.createCategory,funcao:()=>r("createOrEdit")})]});return e.jsxs("div",{children:[e.jsx(Se,{}),t.length===0?i:e.jsx(_e,{})]})}export{dt as default};
