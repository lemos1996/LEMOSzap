import{r as i,j as e}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f.js";import{u as _}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f20.js";import{a as C}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f89.js";import{c as G,d as H,e as P,a as $,b as q,s as W,g as K,r as V,m as J}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f192.js";import{B as N,x as y,D as U,m as X,G as Y,a as Z,p as ee,t as O,b as te}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f217.js";import{an as z,n as k}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f23.js";import{i as w}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f10.js";import{R as re}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f6.js";import{S as se}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f219.js";import{ap as T,c_ as ne,bp as ie,d3 as oe,by as ae}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f11.js";import{a as ce}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f154.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f8.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f19.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f7.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f34.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f5.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f120.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f119.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f4.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f3.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f2.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f9.js";const A=Symbol("item"),L={type:"idle"},M={type:"dragging"};function D(t){return t[A]===!0}function le({item:t,index:s,instanceId:d}){return{[A]:!0,item:t,index:s,instanceId:d}}const B=i.createContext(null);function de(){const t=i.useContext(B);return w(t!==null),t}const pe=y({flexGrow:1,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"});function ue({script:t,index:s}){const{getQuickReply:d}=z(),{setScript:n,deleteScript:m}=C(),{close:b}=k(),{language:h}=_(),g=c=>{c.stopPropagation(),m(s),b()};return e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-[var(--primary-strong)] p-[6px] bg-base-200 rounded-md",children:e.jsx(ce,{size:14})}),t.id.length!==0&&e.jsx("span",{children:e.jsx(T,{type:d(t.id,"type")})}),e.jsx(N,{xcss:pe,children:t.id.length!==0?d(t.id,"titulo"):e.jsx("em",{className:"text-red-500",children:h.selectQuickReply})}),s!==0&&e.jsx("div",{className:"w-10 animate__animated group/item",children:e.jsx("input",{type:"number",className:"w-10 border border-solid rounded-md text-center font-semibold bg-base-200 group-hover/item:border-[var(--primaria)] focus:border-[var(--primaria)]",value:t.timer,min:0,onClick:c=>c.stopPropagation(),onChange:c=>{const j=parseInt(c.target.value);c.target.value.length<=2&&n(s,"timer",j),j<0&&n(s,"timer",0)}})}),e.jsx("span",{className:"animate__animated animate__zoomIn pulse hidden text-red-500 cursor-pointer group-hover:block",onClick:g,children:e.jsx(ne,{size:18})})]})}const me=y({position:"relative"}),ge=y({width:"100%",flexShrink:"0",height:"34px",boxSizing:"border-box",display:"flex",flexDirection:"row",alignContent:"center",justifyContent:"space-between",padding:"space.050",position:"relative",borderWidth:"border.width",borderStyle:"solid",borderRadius:"8px",cursor:"grab"}),xe=y({paddingBlock:"space.050",paddingInline:"space.100",borderRadius:"border.radius.100",maxWidth:"360px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}),fe=y({opacity:.4});function he({item:t,index:s,position:d}){const{getQuickReply:n}=z(),{open:m}=k(),{setScript:b,quickReply:h}=C(),{registerItem:g,instanceId:x}=de(),c=i.useRef(null),[j,r]=i.useState(null),p=i.useRef(null),[f,o]=i.useState(L);i.useEffect(()=>{const a=c.current,u=p.current;w(a),w(u);const I=le({item:t,index:s,instanceId:x});return G(g({itemId:t.id,element:a}),q({element:u,getInitialData:()=>I,onGenerateDragPreview({nativeSetDragImage:v}){W({nativeSetDragImage:v,getOffset:ee({x:O("space.200","16px"),y:O("space.100","8px")}),render({container:S}){return o({type:"preview",container:S}),()=>o(M)}})},onDragStart(){o(M)},onDrop(){o(L)}}),H({element:a,canDrop({source:v}){return D(v.data)&&v.data.instanceId===x},getData({input:v}){return $(I,{element:a,input:v,allowedEdges:["top","bottom"]})},onDrag({self:v,source:S}){if(S.element===a){r(null);return}const R=P(v.data),E=S.data.index;w(typeof E=="number");const F=s===E-1,Q=s===E+1;if(F&&R==="bottom"||Q&&R==="top"){r(null);return}r(R)},onDragLeave(){r(null)},onDrop(){r(null)}}))},[x,t,s,g]);const l=a=>{m(e.jsx(se,{ignoredIds:h.script.map(u=>u.id),ignoredTypes:["script"],onSelect:({id:u})=>b(s,"id",u)}),{placement:"left-end"},document.getElementById(`script_${t.id}`),10,{mounted:()=>document.getElementById(`script_${t.id}`)?.classList.add("!border-[var(--primaria)]"),desmouted:()=>document.getElementById(`script_${t.id}`)?.classList.remove("!border-[var(--primaria)]")})};return e.jsxs(i.Fragment,{children:[e.jsxs(N,{ref:c,xcss:me,children:[e.jsx(U,{trigger:({triggerRef:a,...u})=>e.jsx("div",{className:"group",ref:X([p,a]),...u,onClick:l,"style-inject":"grid-atlassian",children:e.jsx(Y,{id:`script_${t.id}`,alignItems:"center",columnGap:"space.100",templateColumns:"auto 1fr auto",xcss:[ge,f.type==="dragging"&&fe],children:e.jsx(ue,{script:t,index:s})})})}),j&&e.jsx("div",{className:"tema-indicador",children:e.jsx(Z,{edge:j,gap:"1px"})})]}),f.type==="preview"&&re.createPortal(e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"ml-2",children:e.jsx(T,{type:n(t.id,"type")})}),e.jsx(N,{xcss:xe,children:n(t.id,"titulo")})]}),f.container)]})}function ve({index:t,items:s}){return s.length===1?"only":t===0?"first":t===s.length-1?"last":"middle"}function be(){const t=new Map;function s({itemId:n,element:m}){return t.set(n,m),function(){t.delete(n)}}function d(n){return t.get(n)??null}return{register:s,getElement:d}}function je(){const{quickReply:t,sortScript:s}=C(),{close:d}=k(),[{items:n,lastCardMoved:m},b]=i.useState({items:[],lastCardMoved:null}),[h]=i.useState(be);i.useEffect(()=>{b(r=>({...r,items:t?.script||[]}))},[t]);const[g]=i.useState(()=>Symbol("instance-id")),x=i.useCallback(({startIndex:r,indexOfTarget:p,closestEdgeOfTarget:f})=>{const o=K({startIndex:r,closestEdgeOfTarget:f,indexOfTarget:p,axis:"vertical"});o!==r&&(b(l=>{const a=l.items[r];return{items:V({list:l.items,startIndex:r,finishIndex:o}),lastCardMoved:{item:a,previousIndex:r,currentIndex:o,numberOfItems:l.items.length}}}),d(),s({oldIndex:r,newIndex:o}))},[]);i.useEffect(()=>J({canMonitor({source:r}){return D(r.data)&&r.data.instanceId===g},onDrop({location:r,source:p}){const f=r.current.dropTargets[0];if(!f)return;const o=p.data,l=f.data;if(!D(o)||!D(l))return;const a=n.findIndex(I=>I.id===l.item.id);if(a<0)return;const u=P(l);x({startIndex:o.index,indexOfTarget:a,closestEdgeOfTarget:u})}}),[g,n,x]),i.useEffect(()=>{if(m===null)return;const{item:r,previousIndex:p,currentIndex:f,numberOfItems:o}=m,l=h.getElement(r.id);l&&te(l)},[m,h]);const c=i.useCallback(()=>n.length,[n.length]),j=i.useMemo(()=>({registerItem:h.register,reorderItem:x,instanceId:g,getListLength:c}),[h.register,x,g,c]);return e.jsx(B.Provider,{value:j,children:e.jsx("div",{className:"pb-1 flex flex-col gap-[6px]",children:n.map((r,p)=>e.jsx(he,{item:r,index:p,position:ve({index:p,items:n})},r.id))})})}function qe(){const{language:t}=_(),{addScript:s}=C();return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{children:t.script}),e.jsx("div",{className:"cursor-pointer lg:tooltip lg:tooltip-bottom before:!w-[120px]","data-tip":t.scriptIncludeTypingAudio,children:e.jsx("div",{className:"pulse text-[var(--icon)]",children:e.jsx(ie,{size:20})})}),e.jsx("div",{className:"cursor-pointer lg:tooltip lg:tooltip-bottom before:!w-[120px]","data-tip":t.script_reorganize,children:e.jsx("div",{className:"pulse text-[var(--icon)] pb-[2px]",children:e.jsx(oe,{size:17})})})]}),e.jsx("div",{children:e.jsx("h2",{children:t.intervalo})})]}),e.jsx(je,{}),e.jsx("div",{className:"flex justify-center pt-2",children:e.jsx("div",{onClick:s,className:"cursor-pointer lg:tooltip lg:tooltip-top","data-tip":t.addMoreQuickReply,children:e.jsx("div",{className:"pulse",children:e.jsx(ae,{size:30,className:"text-[var(--primaria)]"})})})})]})}export{qe as default};
