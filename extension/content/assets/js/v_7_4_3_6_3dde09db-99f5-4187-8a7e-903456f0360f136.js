import{j as e,r as o}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f.js";import{e as J,F as K}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f6.js";import{u as Y}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f31.js";import{d as Z,u as ee}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f20.js";import{aj as te,m as ae,n as se,b3 as ne,b4 as ie}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f23.js";import{A as w}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f179.js";import{_ as T,D as re,a2 as le,ao as oe,aB as ce,bh as de,Q as me,U as xe,au as fe}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f11.js";import{W as D}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f19.js";import{a as pe}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f108.js";import{U as ue}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f62.js";import{c as ge,d as he}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f154.js";import{u as je}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f46.js";const be=o.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f177.js")),[]));function ve({userId:l,name:c}){return e.jsx(o.Suspense,{fallback:e.jsx(e.Fragment,{}),children:e.jsx(be,{userId:l,name:c})})}const _e=o.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f178.js")),[]));function ye(){return e.jsx(o.Suspense,{fallback:e.jsx(e.Fragment,{}),children:e.jsx(_e,{})})}function A({userId:l,name:c}){const{variaveisWA:p}=te(),{icons_cor_primaria:C,tutorial_mensagens_agendadas:j}=Z(je(t=>({icons_cor_primaria:t.icons_cor_primaria,tutorial_mensagens_agendadas:t.getUrl("tutoriais","mensagens_agendadas")}))),{agendamentos:x,agendamentosNaoDisparados:u,removeAgendamento:I,buttonActive:r,setButtonActive:M,openUserChat:E}=Y(),[b,v]=o.useState(!1),[m,k]=o.useState(r?x:x.filter(t=>t.userID===l)),{language:s}=ee(),[S,L]=o.useState(new Map),H=async t=>{const i=await D.Contact("getProfilePictureUrl",t),{name:a}=await D.Utils("getContato",t);return{nome:a,base64:i}},z=async t=>{const i=Array.from(new Set(t.map(n=>n.userID))),a=new Map;for(const n of i){const d=await H(n);a.set(n,d)}L(a)};o.useEffect(()=>{z(m)},[m]);const g=t=>S.get(t)||{nome:"",base64:""};o.useEffect(()=>{const t=new Date().getTime(),a=(r?x:x.filter(n=>n.userID===l)).sort((n,d)=>{const V=new Date(`${n.data}T${n.hora}:00`).getTime(),X=new Date(`${d.data}T${d.hora}:00`).getTime(),Q=Math.abs(V-t),q=Math.abs(X-t);return Q-q});k(a)},[x,r,l,u]);const{open:f}=ae(),{open:O}=se(),_=50,y=37,N="calc(85vh - 300px)",h="950px",P=()=>{const t=m.length*_+y,i=parseInt(N.replace(/[^\d]/g,""));return Math.min(t,i)},U=t=>{f(e.jsx(w,{agendamento:t,create:!1,userId:l,name:c,tipo:"agendamento"}))},R=async()=>{f(e.jsx(w,{agendamento:null,create:!0,userId:l,name:c,tipo:"agendamento"}))},$=(t,i,a=!0)=>{const n=i,d=i.parentElement;O(t,{placement:"bottom-end"},n,0,{mounted:()=>{d.classList.add("_ajv9"),a&&n.classList.add("x11t6m9b")},desmouted:()=>{d.classList.remove("_ajv9"),n.classList.remove("x11t6m9b")}})},B=t=>{E(t.userID),f(e.jsx(A,{userId:t.userID,name:c}))},W=({index:t,style:i})=>{const a=m[t];return e.jsxs("div",{style:i,className:"flex items-center rounded-lg hover:bg-base-200 cursor-pointer h-full border-solid border-b border-[var(--border-list)] last-of-type:border-none",children:[e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx("span",{className:"break-words truncate",style:{maxWidth:"100px"},children:a.titulo})}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center gap-2",children:[g(a.userID).base64==="undefined"?e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",children:e.jsx(ue,{})}):e.jsx("img",{src:g(a.userID).base64,className:"w-8 h-8 rounded-full object-cover",alt:"User"}),e.jsx("p",{className:"break-words truncate",style:{maxWidth:"92px"},children:g(a.userID).nome})]})}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.tipo}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:xe.converterData(a.data)}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.hora}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.recorrenciaManual?a.recorrencia?`${a.recorrencia} ${s.dias}`:s.vazia:s[a.recorrencia]||s.vazia}),e.jsxs("div",{className:"flex-1 flex items-center justify-center gap-1",children:[e.jsx("span",{className:"pulse",onClick:()=>U(a),children:e.jsx(fe,{className:"h-4 w-4"})}),e.jsx("span",{className:"pulse",onClick:()=>I(a.id,"agendamento"),children:e.jsx(pe,{className:"h-4 w-4"})}),r&&l!==a.userID&&e.jsx("span",{className:"pulse lg:tooltip lg:tooltip-left",onClick:()=>B(a),"data-tip":s.agenOpenChat,children:e.jsx(ie,{className:"h-4 w-4"})})]})]},a.id)},F=()=>e.jsx("div",{className:"w-full border-collapse",children:e.jsxs("div",{className:"flex font-bold",children:[e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:s.agendamento_table_titulo}),e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:s.agendamento_table_cliente}),e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:s.agendamento_table_tipo}),e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:s.agendamento_table_data}),e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:s.agendamento_table_hora}),e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:s.agendamento_recorrencia}),e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:s.agendamento_table_acao})]})}),G=()=>{v(!0),M(!r),setTimeout(()=>{v(!1)},700)};return e.jsxs("div",{className:"grid gap-4",style:{maxHeight:"90vh",width:h},children:[e.jsxs("div",{className:"w-full flex items-center justify-between pr-2",children:[e.jsx("div",{className:`${b?"animate__animated animate__fadeIn":""}`,children:e.jsxs(re,{children:[r&&s.todas," ",s.agendamento_title," ",c?s.para+" "+c:""]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{className:"bg-transparent border-solid border-[var(--primaria)] border rounded-lg text-[var(--primaria)] text-sm text-center self-center px-3 py-[4px] pulse relative",onClick:()=>f(e.jsx(ve,{userId:l,name:c})),children:[e.jsxs("span",{className:"inline-flex items-center gap-0.5",children:[s.relatorio,e.jsx(ne,{})]}),e.jsx("div",{className:"badge badge-primary !bg-[var(--primaria)] !text-white badge-sm absolute -top-2 -right-2",children:r?u.length:u.filter(t=>t.userID===l).length})]}),e.jsx("button",{className:`border-solid border-[var(--primary)] border rounded-full text-center
            ${r?"bg-[var(--primary-muted)] text-white":"bg-transparent text-[var(--primary)]"}
            self-center px-3 py-[4px] pulse lg:tooltip lg:tooltip-bottom text-sm transition-all duration-300 ease-in`,onClick:()=>G(),"data-tip":r?s.ocultarContatosDesc:s.exibirContatosDesc,children:e.jsxs("span",{className:"inline-flex items-center gap-0.5",children:[r?s.ocultar:s.exibirTodos,r?e.jsx(ge,{}):e.jsx(he,{})]})}),e.jsx("div",{className:p.confgIcone+"cursor-pointer pulse flex items-center justify-center !ml-0",children:e.jsx("div",{onClick:t=>$(e.jsx(ye,{}),t.currentTarget),className:p.iconeStyle+"cursor-pointer x11xpdln x1d8287x x1h4ghdb",children:e.jsx("span",{className:p.modalOptions.animChildren+"flex items-center justify-center",children:e.jsx(le,{className:C?"text-[var(--primaria)]":"text-[var(--panel-header-icon)]",size:20})})})})]})]}),e.jsx("div",{className:`${b?"animate__animated animate__fadeIn":""}`,children:m.length>0?e.jsxs("div",{style:{height:P(),maxHeight:N,width:"100%"},children:[e.jsx(F,{}),e.jsx(J,{children:({height:t,width:i})=>e.jsx(K,{height:t-y,itemCount:m.length,itemSize:_,width:h,style:{overflowX:"hidden",width:h,minHeight:"50px"},children:W})})]}):e.jsxs("div",{className:"!h-fit flex flex-col items-center justify-center",children:[e.jsx(oe,{title:s.agendamentoEmptyTitle,description:s.agendamentoEmptyDesc,icon:e.jsx(ce,{className:"w-7 h-7 text-[var(--primaria)]"})}),j.active&&e.jsx(de,{funcao:()=>window.open(j.link,"_blank")})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(me,{name:s.adicionar,funcao:R})})]})}const ze=Object.freeze(Object.defineProperty({__proto__:null,default:A},Symbol.toStringTag,{value:"Module"}));export{ve as R,ze as i};
