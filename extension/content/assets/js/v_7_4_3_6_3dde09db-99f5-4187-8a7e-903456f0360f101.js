import{j as t,r as h}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f.js";import{u as b,a as w,g as T,d as I}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f20.js";import{aE as E,aF as F,aG as P,aH as L,aI as z,aJ as H,aK as O,aL as U,aM as V,aN as K,aO as W,aP as G,aQ as J,aR as $,aS as q,aT as Q,aU as Y,aV as X,aW as Z,m as y,v as ee,I as se}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f23.js";import{i as ae,g as te}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f22.js";import{b as oe,B as re}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f29.js";import{W as j,C as ce,R as ne,I as x,_ as N,J as R,D as ie,b7 as ue,b8 as le,V as pe,K as de,Q as me}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f11.js";import{M as he,R as fe,f as ge,b as be,c as ke,d as xe}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f24.js";import{M as je,R as Be}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f31.js";import{a as A}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f30.js";import{M as ye,R as Ne}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f27.js";import{M as ve,R as we}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f26.js";import{M as Re,R as Ae}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f25.js";import{M as Me,R as _e}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f28.js";import{r as De}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f32.js";import{c as Se}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f8.js";import{B as Ce}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f74.js";import{b as Te}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f65.js";import{e as Ie}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f151.js";import{u as g}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f46.js";import{V as v}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f19.js";const M=async e=>{A.setState({notes:e}),await j("notes",e),chrome.runtime.sendMessage({action:"notesBackup"})},Ee=e=>{const s=[...A.getState().notes];e.forEach(a=>{const o=s.findIndex(n=>n.id===a.id);o===-1?s.push(a):s[o]=a}),M(s)},r=(e,s)=>{console.error(`Erro ao realizar a importação do backup: [${e}] `,s)},i=(e,s,a)=>{try{const{backup:o}=_.getState();if(s&&typeof o[e]=="string"){const n=ce.decryptData(o[e]);return typeof n===a?{success:!0,backup:n}:{success:!1,backup:null}}else return typeof o[e]===a?{success:!0,backup:o[e]}:{success:!1,backup:null}}catch(o){return console.error("Error ao descompactar backup, key:",e,"erro da operação:",o),{success:!1,backup:null}}};function Fe(e,s,a){switch(e){case"respostasRapidas":Pe(i(e,s,"object"),i("categoria",s,"object"),i("respostasRapidasAcao",s,"object"),i("guardaMsg",s,"object"),i("medias",s,"object"),a);break;case"respostasRapidasAcao":case"guardaMsg":case"categoria":case"medias":console.warn(`A funcionalidade para "${e}" está inclusa em guardaMsg`);break;case"agendamentos":ze(i(e,s,"object"),i("agendamentosNaoDisparados",s,"object"),i("sendAfterWhatsAppOpens",s,"object"),a);break;case"agendamentosNaoDisparados":case"sendAfterWhatsAppOpens":console.warn(`A funcionalidade para "${e}" está inclusa em agendamentos`);break;case"crm":He(i(e,s,"object"),a);break;case"contatos":Oe(i(e,s,"object"),a);break;case"notes":Ue(i(e,s,"object"),a);break;case"notifications":Ve(i(e,s,"object"),a);break;case"perfil":Ke(i(e,s,"object"),a);break;case"userTabs":We(i(e,s,"object"),a);break;case"agrupamentos":Ge(i(e,s,"object"),a);break;case"relatorio":Je(i(e,s,"object"),a);break;case"encomendas":$e(i(e,s,"object"),a);break;case"autoatendimento":qe(i(e,s,"object"),a);break;case"webhook":Ye(i(e,s,"object"));break;case"IA":Xe(i(e,s,"object"));break;case"status":Ze(i(e,s,"object"),a);break;case"pinChat":es(i(e,s,"object"),a);break;case"atendimento":ss(i(e,s,"object"));break;case"backupAutomatico":as(i(e,s,"object"));break;case"whatsApi":ts(i(e,s,"object"));break;case"FollowUp":Qe(i(e,s,"object"),a);break;case"fluxo":Le(i(e,s,"object"),i("fluxoFiles",s,"object"),a);break;case"replacementStorage":os(i(e,s,"object"),a);break;default:console.error("Chave de importação desconhecida:",e);break}}const Pe=(e,s,a,o,n,p)=>{try{if(!e.success&&!o.success){r("respostasRapidas, guardaMsg","[DescompressBackup] => Não retornou sucesso");return}e.success||(e.backup=[],console.warn("[respostasRapidas] => Vazio")),s.success||(s.backup=[],console.warn("[categoria] => Vazio")),a.success||(a.backup=[],console.warn("[respostasRapidasAcao] => Vazio")),o.success||(o.backup=[],console.warn("[guardaMsg] => Vazio")),n.success||(n.backup=[],console.warn("[medias] => Vazio"));const c=ge(e.backup,o.backup),l=be(a.backup,n.backup,e.backup,o.backup);p?ke(l,c,s.backup):xe(l,c,s.backup)}catch(c){r("guardaMsg, categoria, medias",c)}},Le=(e,s,a)=>{try{if(!e.success){r("fluxo","[DescompressBackup] => Não retornou sucesso");return}const o=e.backup;s.success&&j("fluxoFiles",s.backup),a?P(o):L(o),chrome.runtime.sendMessage({action:"reloadFluxo"})}catch(o){r("fluxo",o)}},ze=(e,s,a,o)=>{try{let n=s.backup,p=a.backup;if(!e.success){r("agendamentos","[DescompressBackup] => Não retornou sucesso");return}s.success||(n=[],r("agendamentosNaoDisparados","[DescompressBackup] => Não retornou sucesso")),a.success||(p=!1,r("sendAfterWhatsAppOpens","[DescompressBackup] => Não retornou sucesso")),o?je(e.backup,n,p):Be(e.backup,n,p)}catch{}},He=async({success:e,backup:s},a)=>{try{if(!e){r("crm","[DescompressBackup] => Não retornou sucesso");return}if(a){const o=await ne("crm"),n=new Set,p=o.filter(d=>n.has(d.id)?!1:(n.add(d.id),!0)),c=s.filter(d=>!n.has(d.id)),l=p.concat(c);await j("crm",l),chrome.runtime.sendMessage({action:"post-crm"})}else await j("crm",s),chrome.runtime.sendMessage({action:"post-crm"})}catch(o){r("crm",o)}},Oe=({success:e,backup:s},a)=>{try{if(!e){r("contatos","[DescompressBackup] => Não retornou sucesso");return}a?X(s):Z(s)}catch(o){r("contatos",o)}},Ue=({success:e,backup:s},a)=>{try{if(!e){r("notes","[DescompressBackup] => Não retornou sucesso");return}a?Ee(s):M(s)}catch(o){r("notes",o)}},Ve=({success:e,backup:s},a)=>{try{if(!e){r("notifications","[DescompressBackup] => Não retornou sucesso");return}a?Q(s):Y(s)}catch(o){r("notifications",o)}},Ke=({success:e,backup:s},a)=>{try{if(!e){r("perfil","[DescompressBackup] => Não retornou sucesso");return}a?$(s):q(s)}catch(o){r("perfil",o)}},We=({success:e,backup:s},a)=>{try{if(!e){r("userTabs","[DescompressBackup] => Não retornou sucesso");return}a?he(s):fe(s)}catch(o){r("userTabs",o)}},Ge=({success:e,backup:s},a)=>{try{if(!e){r("agrupamentos","[DescompressBackup] => Não retornou sucesso");return}a?ye(s):Ne(s)}catch(o){r("agrupamentos",o)}},Je=({success:e,backup:s},a)=>{try{if(!e){r("relatorio","[DescompressBackup] => Não retornou sucesso");return}a?ve(s):we(s)}catch(o){r("relatorio",o)}},$e=({success:e,backup:s},a)=>{try{if(!e){r("encomendas","[DescompressBackup] => Não retornou sucesso");return}a?Re(s):Ae(s)}catch(o){r("encomendas",o)}},qe=({success:e,backup:s},a)=>{try{if(!e){r("autoatendimento","[DescompressBackup] => Não retornou sucesso");return}a?G(s):J(s)}catch(o){r("autoatendimento",o)}},Qe=({success:e,backup:s},a)=>{try{if(!e){r("autoatendimento","[DescompressBackup] => Não retornou sucesso");return}a?z(s):H(s)}catch(o){r("autoatendimento",o)}},Ye=({success:e,backup:s})=>{try{if(!e){r("webhook","[DescompressBackup] => Não retornou sucesso");return}W(s)}catch(a){r("webhook",a)}},Xe=({success:e,backup:s})=>{try{if(!e){r("IA","[DescompressBackup] => Não retornou sucesso");return}K(s)}catch(a){r("IA",a)}},Ze=({success:e,backup:s},a)=>{try{if(!e){r("status","[DescompressBackup] => Não retornou sucesso");return}a?Me(s):_e(s)}catch(o){r("status",o)}},es=({success:e,backup:s},a)=>{try{if(!e){r("pinChat","[DescompressBackup] => Não retornou sucesso");return}a?U(s):V(s)}catch(o){r("pinChat",o)}},ss=({success:e,backup:s})=>{try{if(!e){r("atendimento","[DescompressBackup] => Não retornou sucesso");return}O(s)}catch(a){r("atendimento",a)}},as=({success:e,backup:s})=>{try{if(!e){r("backupAutomatico","[DescompressBackup] => Não retornou sucesso");return}oe(s)}catch(a){r("backupAutomatico",a)}},ts=({success:e,backup:s})=>{try{if(!e){r("whatsApi","[DescompressBackup] => Não retornou sucesso");return}De(s)}catch(a){r("whatsApi",a)}},os=({success:e,backup:s},a)=>{try{if(!e){r("replacementStorage","[DescompressBackup] => Não retornou sucesso");return}a?E(s):F(s)}catch(o){r("replacementStorage",o)}},_=Se()((e,s)=>({backup:null,keys:[],extractFile:a=>{const{language:o}=b.getState(),{close:n}=y.getState(),p=new FileReader;p.readAsText(a,"UTF-8"),p.onload=c=>{try{const l=JSON.parse(c.target.result);if(typeof l!="object"){x({type:"Error",message:o.fileNotBK,position:"top-right"});return}const d=re.filter(k=>k.keys.some(f=>k.tag==="all"?!0:!!l[f.key]));e({keys:d,backup:l})}catch(l){n(),console.error("Erro ao importar Backup",l),x({type:"Error",message:o.fileNotBK,position:"top-right"})}}},setActiveKey:(a,o)=>e(n=>({keys:n.keys.map(c=>a==="all"?{...c,checked:o}:c.tag===a?{...c,checked:o}:c.tag==="all"&&!o?{...c,checked:!1}:c)})),setActiveMerge:(a,o)=>e(n=>({keys:n.keys.map(c=>a==="all"?{...c,merge:o}:c.tag===a?{...c,merge:o}:c.tag==="all"&&!o?{...c,merge:!1}:c)})),formatBackup:()=>{const{keys:a}=s(),{close:o,openRendertype:n}=y.getState(),{language:p}=b.getState(),{session:c}=w.getState();if(!a.find(l=>l.checked)){x({type:"Error",message:p.selectBkItemImport,position:"top-right"});return}if(!c.is_premium){n("user_free");return}for(const l of a)if(l.tag!=="all"&&l.checked)for(const d of l.keys)Fe(d.key,d.compress,l.merge);o(),x({type:"Success",message:p.backupImported,position:"top-right"})}}));function rs(){const{idioma:e,setIdioma:s}=b(),a=n=>{s(n),chrome.runtime.sendMessage({action:"languageReload",lang:n})};return t.jsxs("select",{className:"select pt-0 select-bordered select-sm w-fit max-w-xs shadow-sm",value:e,onChange:n=>{a(n.target.value)},id:"select-language",children:[t.jsx("option",{value:"pt",children:"Português"}),t.jsx("option",{value:"es",children:"Español"}),t.jsx("option",{value:"en",children:"English"})]})}const cs=h.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f160.js")),[]));function ns(){return t.jsx(h.Suspense,{fallback:t.jsx(t.Fragment,{}),children:t.jsx(cs,{})})}const is=h.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f161.js")),[]));function us(){return t.jsx(h.Suspense,{fallback:t.jsx(t.Fragment,{}),children:t.jsx(is,{})})}const ls=h.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f162.js")),[]));function ps(){return t.jsx(h.Suspense,{fallback:t.jsx(t.Fragment,{}),children:t.jsx(ls,{})})}function ds(){const{privacityOptions:e,setPrivacityOptions:s}=ae(),{language:a}=b(),o=c=>{s({...e,[c]:{hide:!e[c].hide}})},n=[{tag:"photoHidden",nome:a.ocutar_foto,checked:e.photoHidden.hide},{tag:"nameHidden",nome:a.ocutar_nome,checked:e.nameHidden.hide},{tag:"midiaHidden",nome:a.ocutar_midia,checked:e.midiaHidden.hide},{tag:"galeryHidden",nome:a.ocutar_galeria,checked:e.galeryHidden.hide},{tag:"lastMessageHidden",nome:a.ocutar_mensagem,checked:e.lastMessageHidden.hide},{tag:"messageHidden",nome:a.ocutar_chat,checked:e.messageHidden.hide}];return t.jsx(t.Fragment,{children:n.map((c,l)=>t.jsx("label",{htmlFor:c.tag,children:t.jsxs("div",{className:"flex justify-between cursor-pointer items-center h-9 py-2 rounded-lg hover:bg-[var(--dropdown-background-hover)] px-2",children:[t.jsx("span",{children:c.nome}),t.jsx(R,{id:c.tag,switchUpdate:()=>{o(c.tag)},estado:c.checked})]})},l))})}const m="flex justify-between cursor-pointer items-center h-9 py-2 rounded-lg hover:bg-[var(--dropdown-background-hover)] px-2";function ms(){const e=b(u=>u.language),s=te(u=>u.close),a=_(u=>u.extractFile),{open:o,openRendertype:n}=y(g(u=>({open:u.open,openRendertype:u.openRendertype}))),{tema:p,setTema:c}=ee(g(u=>({tema:u.tema,setTema:u.setTema}))),{theme:l,setTheme:d}=T(g(u=>({theme:u.theme,setTheme:u.setTheme}))),{checkout:k}=I(g(u=>({checkout:u.getUrl("principais","checkout")}))),{session:f,user:D,logout:S}=w(g(u=>({session:u.session,user:u.user,logout:u.logout}))),[B,C]=h.useState(!1);return t.jsxs("div",{children:[t.jsx(ie,{children:e.configAgendamento_title}),t.jsxs("div",{className:"pt-2 flex flex-col gap-2 overflow-auto",style:{maxHeight:"calc(100vh - 70px)"},children:[t.jsx("label",{htmlFor:"select-language",children:t.jsxs("div",{className:m,children:[t.jsx("span",{children:e.idioma}),t.jsx(rs,{})]})}),t.jsx("label",{htmlFor:"handleTheme",children:t.jsxs("div",{className:m,children:[t.jsx("span",{children:e.tema}),t.jsx(R,{estado:l,switchUpdate:()=>d(!l),id:"handleTheme"})]})}),t.jsx("label",{htmlFor:"handleMenuTheme",children:t.jsxs("div",{className:m,children:[t.jsx("span",{children:e.tema_menu}),t.jsxs("select",{className:"select pt-0 select-bordered select-sm w-fit max-w-xs shadow-sm",value:p,onChange:u=>{c(u.target.value)},id:"handleMenuTheme",children:[t.jsx("option",{value:"default",children:e.default}),t.jsx("option",{value:"dark",children:e.dark}),t.jsx("option",{value:"original",children:e.original}),t.jsx("option",{value:"whats",children:e.whats}),t.jsx("option",{value:"prime",children:e.prime}),t.jsx("option",{value:"dim",children:e.dim})]})]})}),t.jsx("div",{onClick:()=>window.open(v.painel_Gestor,"_blank"),className:m,children:t.jsx("span",{children:e.painel_Gestor})}),t.jsxs("div",{onClick:()=>C(!B),className:m,children:[t.jsx("span",{children:e.privacidade}),t.jsx("span",{className:"w-fit",children:B?t.jsx(ue,{className:"w-6 h-6"}):t.jsx(le,{className:"w-6 h-6"})})]}),B&&t.jsx(ds,{}),t.jsx("div",{onClick:()=>{s(),o(t.jsx(us,{}))},className:m,children:t.jsx("span",{children:e.backup})}),t.jsx("label",{htmlFor:"jsonInput",children:t.jsxs("div",{className:m,children:[t.jsx("span",{children:e.import_backup}),t.jsx("input",{type:"file",accept:".json",id:"jsonInput",className:"hidden",onChange:u=>{a(u.target.files[0]),s(),o(t.jsx(ps,{}))}})]})}),t.jsx("div",{onClick:()=>{s(),o(t.jsx(ns,{}))},className:m,children:t.jsx("span",{children:e.backupAutomatico})}),t.jsx("div",{onClick:()=>{s(),o(t.jsx(se,{}),!0)},className:m,children:t.jsx("span",{children:e.assistenteIA})}),t.jsx("div",{onClick:()=>Ie(!0),className:m,children:t.jsx("span",{children:e.exportarTodosPerfis})}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"m-auto",children:t.jsx(Ce,{})}),f.is_premium&&t.jsx("span",{className:"m-auto",children:t.jsx(pe,{type:"default",btnPremium:e.btnPremiumLogado,checkout:k.link,webhook:Te})})]}),t.jsx("div",{className:"flex items-center justify-center gap-4 pb-4 pt-4",children:f.is_premium?t.jsx(de,{name:e.deslogar,funcao:S}):t.jsx(me,{name:e.logar,funcao:()=>n("login")})})]}),t.jsx("div",{className:"absolute bottom-0 mb-[7px]",style:{width:"calc(100% - 30px)"},children:t.jsxs("div",{className:"flex justify-between",children:[f.is_auth&&t.jsx("kbd",{className:"kbd kbd-sm mb-1 rounded",children:D.email}),t.jsxs("kbd",{className:"kbd kbd-sm mb-1  rounded",children:[e.version," ",v.version]})]})})]})}const Es=Object.freeze(Object.defineProperty({__proto__:null,default:ms},Symbol.toStringTag,{value:"Module"}));export{Es as i,_ as u};
