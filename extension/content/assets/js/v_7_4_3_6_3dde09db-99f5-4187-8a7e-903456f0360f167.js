import{r as j,j as e}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f.js";import{a$ as N,u as P,n as z,a as D,b0 as R,m as $}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f23.js";import{u as w,g as E,d as _}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f20.js";import{F as L}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f43.js";import{bp as B,H as U,cT as G,X as g,J as k,b6 as H,as as V,Q as C,aL as M,cU as q,cV as W,cW as J,D as Q,bh as X,I as S}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f11.js";import{U as K}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f73.js";import{W as Y}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f19.js";import{A as Z}from"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f195.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f8.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f7.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f4.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f3.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f2.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f10.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f6.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f9.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f22.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f45.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f46.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f47.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f104.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f125.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f26.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f105.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f36.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f59.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f106.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f107.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f35.js";import"./v_7_4_3_6_3dde09db-99f5-4187-8a7e-903456f0360f108.js";function ee(){const{activeColapse:i,setActiveColapse:u,activeFollowUp:t,setTimingAcionamento:d,setDispararAcionamento:n}=N(),{language:s}=w(),[l,p]=j.useState(t.acionamento.timing.days),[r,c]=j.useState(t.acionamento.timing.hours),[o,x]=j.useState(t.acionamento.timing.minutes|5);j.useEffect(()=>{d({days:l,hours:r,minutes:o})},[l,r,o,d]);const f=()=>{const m=String(r).padStart(2,"0"),v=String(o).padStart(2,"0");return`${m}:${v}`},b=()=>{let m="";return l===1?m=l+" "+s.day:l>1&&(m=l+" "+s.days),l&&(r||o)&&(m+=" "+s.and+" "),r!==0?m+=" "+f()+" "+s.hours:o!==0&&(m+=" "+o+" "+s.minutes),m},h=e.jsxs("div",{className:"flex flex-col gap-2 justify-center items-start mt-2",children:[e.jsxs("div",{className:"flex text-sm font-bold",children:[e.jsx("span",{children:s.setActionTime}),e.jsx("span",{className:"ml-1 cursor-pointer lg:tooltip lg:tooltip-right","data-tip":s.tooltipSetActionTime,children:e.jsx("span",{className:"pulse",children:e.jsx(B,{className:"w-5 h-5 text-[var(--primaria)]"})})})]}),e.jsxs("div",{className:"flex flex-row gap-4 justify-center items-center w-full px-1",children:[e.jsxs("label",{className:"form-control w-full",children:[e.jsx("div",{className:"label !pb-[2px]",children:e.jsx("h4",{className:"font-semibold",children:`${s.days}:`})}),e.jsx("input",{id:"dias",type:"number",placeholder:s.days,min:"0",value:l===0?"":l,onChange:m=>{const v=m.target.value===""?0:Number(m.target.value);p(v)},className:"input input-bordered w-full input-sm"})]}),e.jsxs("label",{className:"form-control w-full",children:[e.jsx("div",{className:"label !pb-[2px]",children:e.jsx("h4",{className:"font-semibold",children:`${s.hours}:`})}),e.jsx("input",{id:"horas",type:"time",placeholder:s.hours,value:f(),onChange:m=>{const[v,a]=m.target.value.length!==0?m.target.value.split(":"):["00","05"];c(parseInt(v,10)),x(parseInt(a,10))},className:"input input-bordered w-full input-sm"})]})]}),e.jsx("div",{className:"text-center p-1 m-auto",children:e.jsxs(U,{weight:"600",size:"16px",children:[s.dispartAcionamento," ",b()," ",s.dispartAcionamentoAfter]})}),e.jsxs("div",{role:"alert",className:"alert alert-info mt-2",style:{zoom:"80%"},children:[e.jsx(G,{className:"w-7 h-7"}),e.jsxs("span",{className:"font-semibold",style:{fontSize:"17px"},children:[s.actionVerifyEvery5Minutes,". ",s.actionVerifyDes]})]})]});return e.jsxs("div",{className:"collapse collapse-arrow shadow-md border border-solid border-[var(--intro-background)] min-h-[54px] "+(i==="acionamento"?"":"bg-base-200"),children:[e.jsx("input",{type:"radio",name:"my-accordion-2",checked:i==="acionamento",onChange:()=>u("acionamento")}),e.jsx("div",{className:"collapse-title text-xl font-bold",children:s.actionFollowUp}),e.jsx("div",{className:"collapse-content",children:e.jsxs("div",{className:"gap-2 h-full overflow-y-auto",children:[e.jsxs("label",{className:"cursor-pointer label justify-start gap-2",children:[e.jsx(g,{id:"dispararAoEntrar",estado:t.acionamento.type==="dispararAoEntrar",checkedUpdade:()=>n("dispararAoEntrar")}),e.jsx("span",{className:"label-text",children:s.dispatchImediatellyEnterFunil})]}),e.jsxs("label",{className:"cursor-pointer label justify-start gap-2",children:[e.jsx(g,{id:"dispararAoSair",estado:t.acionamento.type==="dispararAoSair",checkedUpdade:()=>n("dispararAoSair")}),e.jsx("span",{className:"label-text",children:s.dispatchImediatellyLeaveFunil})]}),e.jsxs("label",{className:"cursor-pointer label justify-start gap-2",children:[e.jsx(g,{id:"timing",estado:t.acionamento.type==="timing",checkedUpdade:()=>n("timing")}),e.jsx("span",{className:"label-text",children:s.dispatchTime})]}),t.acionamento.type==="timing"&&h]})})]})}function se(){const{activeColapse:i,setActiveColapse:u,activeFollowUp:t,setRegraUpdate:d,setRegrasUpdateAssinatura:n,setAssinaturaName:s}=N(),{language:l}=w(),p=t.regras.assinatura.propriedades;return e.jsxs("div",{className:"collapse collapse-arrow shadow-md border border-solid border-[var(--intro-background)] min-h-[54px] "+(i==="regras"?"":"bg-base-200"),children:[e.jsx("input",{type:"radio",name:"my-accordion-2",checked:i==="regras",onChange:()=>u("regras")}),e.jsx("div",{className:"collapse-title text-xl font-bold",children:l.regrasDeAcionamento}),e.jsx("div",{className:"collapse-content",children:e.jsxs("div",{className:"gap-2 h-full overflow-y-auto",children:[e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"cursor-pointer label justify-start gap-2",children:[e.jsx(g,{id:t?.regras?.cancelAfterChat?.type||"cancelAfterChat",estado:t?.regras?.cancelAfterChat?.propriedades?.active||!1,checkedUpdade:()=>d("cancelAfterChat")}),e.jsx("span",{className:"label-text",children:l.cancelAfterChat})]})}),e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"cursor-pointer label justify-start gap-2",children:[e.jsx(g,{id:t?.regras?.responderGrupos?.type||"responderGrupos",estado:t.regras.responderGrupos.propriedades.active||!1,checkedUpdade:()=>d("responderGrupos")}),e.jsx("span",{className:"label-text",children:l.permitirResponderEmGrupos})]})}),e.jsxs("div",{className:"form-control",children:[e.jsxs("label",{className:"cursor-pointer label justify-start gap-2",children:[e.jsx(g,{id:t?.regras?.assinatura?.type||"assinatura",estado:p.active||!1,checkedUpdade:()=>d("assinatura")}),e.jsx("span",{className:"label-text",children:l.personalizarOuDesativarAss})]}),p.active&&e.jsxs("div",{className:"flex flex-col pl-6 gap-0.5",children:[e.jsxs("label",{className:"label !p-0 max-w-xs",htmlFor:"desativarAss",children:[e.jsx("span",{className:"mr-3 font-bold text-base",children:l.desativarAss}),e.jsx(k,{id:"desativarAss",estado:p.desativarAss,switchUpdate:()=>n("desativarAss"),corPrimaria:!0,zoom:{zoom:"85%"}})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"label !p-0 max-w-xs",htmlFor:"persAss",children:[e.jsx("span",{className:"mr-3 font-bold text-base",children:l.personalizarNomeAss}),e.jsx(k,{id:"persAss",estado:p.persAss.active,switchUpdate:()=>n("persAss"),corPrimaria:!0,disabled:p.desativarAss,zoom:{zoom:"85%"}})]}),p.persAss.active&&e.jsxs("label",{className:"input input-bordered border border-solid input-sm flex items-center gap-2 w-full max-w-xs mt-1",children:[e.jsx(H,{fill:"currentColor",className:"h-4 w-4 opacity-70"}),e.jsx("input",{type:"text",placeholder:l.insiraNomeAss,value:p.persAss.nameAss,onChange:c=>s(c.target.value),className:"grow"})]})]})]})]})]})})]})}const I=({id:i,name:u,estado:t,fn:d,icon:n})=>e.jsx("div",{className:"w-full",children:e.jsx("label",{htmlFor:i,children:e.jsxs("div",{className:"flex gap-1 items-center cursor-pointer",children:[e.jsx(g,{id:i,estado:t,checkedUpdade:d}),e.jsx(U,{children:u}),n]})})});function ae(){const{addAbaInFunil:i,addLabelInFunil:u,LabelOrTabIsExist:t,activeTabOrLabel:d,setActiveTabOrLabel:n,removeLabelInFunil:s,removeAbaInFunil:l}=N(),{language:p}=w(),{isBusiness:r}=E(),{userTabs:c}=P(),{close:o}=z(),[x,f]=j.useState([]);j.useEffect(()=>{(async()=>{const a=await Y.Labels("getAllLabels");f(a)})()},[]);const b=["labels","userTabs"],h=K(),y=(a,F,T)=>{if(t(a))F==="labels"?s(a):l(a);else if(F==="labels"){const A=x.find(O=>O.id===a);u({...A,chats:[]})}else i({id:a,tag:T.tag,type:"aba",chats:T.chats?.map(A=>({...A,date:null}))||[]})},m={labels:x.map(a=>e.jsx(I,{id:a.id,name:a.name,estado:t(a.id),fn:()=>y(a.id,"labels"),icon:e.jsx(M,{size:20,style:{color:a.hexColor}})})),userTabs:c.length!==0?c.map(a=>e.jsx(I,{id:a.id,name:a.tag,estado:t(a.id),fn:()=>y(a.id,"userTabs",a),icon:e.jsx(V,{size:20,className:"text-[var(--primaria)]"})})):e.jsx("div",{className:"m-auto",children:e.jsx(C,{name:p.create,funcao:()=>{o(),h()}})})};return e.jsxs("div",{className:"w-[350px] p-3 !pt-0",children:[e.jsx("div",{className:"tabs tabs-bordered mt-4",children:b.map(a=>{if(!(!r&&a==="labels"))return e.jsxs("label",{className:"tab "+(a===d?"tab-activeTabOrLabel !border-[var(--primaria)]":""),htmlFor:a,children:[e.jsx("span",{children:p["filter_"+a]}),e.jsx("input",{id:a,type:"checkbox",checked:a===d,onChange:()=>n(a),className:"hidden"})]})})}),e.jsx("div",{className:"flex gap-1 flex-col mt-4 overflow-y-auto",style:{maxHeight:"30vh"},children:m[d]})]})}function te(){const{removeAbaInFunil:i,removeLabelInFunil:u,activeFollowUp:t}=N(),{open:d}=z(),{language:n}=w(),{isBusiness:s}=E(),l=[...(t.funil.abas||[]).map(r=>({...r,type:"aba"})),...(t.funil.etiquetas||[]).map(r=>({...r,type:"etiqueta"}))],p=r=>{const c=r.currentTarget;d(e.jsx(ae,{}),{placement:"bottom"},c,10,{mounted:()=>c.setAttribute("style","outline: 2px solid hsl(var(--bc) / 0.2); outline-offset: 2px;"),desmouted:()=>c.removeAttribute("style")})};return e.jsxs("div",{className:"flex flex-col gap-2 shadow-md border border-solid border-[var(--intro-background)] p-2 rounded-lg",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"flex gap-1 items-center",children:[e.jsx(q,{className:"w-5 h-5 text-[var(--primaria)]"}),e.jsx("h2",{className:"text-lg",children:s?n.selectTabAndLabel:n.selectTab})]})}),e.jsx("div",{className:"form-control w-full",children:e.jsx("div",{className:"select select-bordered select-sm !cursor-pointer border border-solid",onClick:p,children:s?n.clickToAddTabAndLabel:n.clickToAddTab})}),e.jsxs("div",{className:"flex flex-col gap-1",children:[l.length>0&&e.jsx("span",{className:"font-bold text-base",children:`${s?n.addTabAndLabel:n.addTab}:`}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:l.map(r=>{const c=r.type==="etiqueta",o=c?M:W,x=c?r.name:r.tag,f=c?u:i,b=c?r.hexColor:"var(--primaria)";return e.jsxs("div",{className:"flex items-center gap-1.5 py-1 px-2 border border-solid rounded-xl pulse group cursor-pointer",style:{borderColor:b},role:"button",tabIndex:0,onClick:()=>f(r.id),children:[e.jsx(o,{className:"w-4 h-4",style:{color:b}}),e.jsx("span",{children:x}),e.jsx("span",{className:"group-hover:block hidden text-red-500",children:e.jsx(J,{size:18})})]},r.id)})})]})]})}function le(){const{activeColapse:i,setActiveColapse:u}=N(),{language:t}=w();return e.jsxs("div",{className:`collapse collapse-arrow shadow-md border min-h-[54px] ${i==="funil"?"":"bg-base-200"}`,children:[e.jsx("input",{type:"radio",name:"my-accordion-2",checked:i==="funil",onChange:()=>{u("funil")}}),e.jsx("div",{className:"collapse-title text-xl font-bold",children:t.funilConfig}),e.jsx("div",{className:"collapse-content",children:e.jsx("div",{className:"gap-2 h-full overflow-y-auto",children:e.jsx(te,{})})})]})}function Me(){const{model:i,activeFollowUp:u,activeColapse:t,setActiveFollowUp:d,validateFollowUp:n,setResetDefaultFollowUp:s}=N(),{createFollowUp:l,editFollowUp:p}=D(),{clearAcao:r}=R(),{open:c}=$(),{language:o}=w(),x=_(h=>h.getUrl("tutoriais","follow_up"));j.useEffect(()=>()=>r(),[]);const f=async()=>{const{success:h,message:y}=n();if(!h){S({type:"Error",message:y,position:"top-right"});return}i==="Create"?l(u):p(u),S({type:"Success",message:i==="Create"?o.followUpCreatedSuccess:o.followUpEditedSuccess,position:"top-right"}),s(),c(e.jsx(L,{}))};return e.jsxs("div",{className:"w-[800px] max-h-[99.5vh] overflow-y-auto flex flex-col gap-4",children:[e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsxs(Q,{children:[i==="Create"?o.create:o.edit," ",o.followUp]}),x.active&&e.jsx(X,{funcao:()=>window.open(x.link,"_blank")})]}),e.jsxs("label",{className:"form-control w-full",children:[e.jsx("div",{className:"label !pb-[1px]",children:e.jsx(U,{children:o.nameFollowUp})}),e.jsx("input",{type:"text",placeholder:o.insertNameFollowUp,className:"input input-bordered w-full input-sm",value:u.nome,onChange:h=>d("nome",h.target.value)})]}),e.jsx(le,{}),e.jsx(ee,{}),e.jsx(Z,{acaoModel:"useAcaoFollowUp",placement:"right",openCollapse:t==="script"}),e.jsx(se,{}),e.jsxs("div",{className:"flex justify-between pt-4 resize-none",children:[e.jsx(C,{name:o.cancel,funcao:()=>{s(),c(e.jsx(L,{}))}}),e.jsx(C,{name:i==="Create"?o.create:o.edit,funcao:f})]})]})}export{Me as default};
